{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "CredentialRegistry Credential metadata",
  "type": "object",

  "definitions": {
    "ctdl": {
      "properties": {
        "@type": { "enum": ["ctdl:Credential"] },

        "ctdl:accreditedBy": {
          "description": "The credential being described is certified as meeting prescribed standards by the agent being referenced. [Organization | Person | QualityAssuranceAction]"
        },

        "ctdl:approvedBy": {
          "description": "Pronouncement of a favorable judgment by the agent being referenced. [Organization | Person | QualityAssuranceAction]"
        },

        "ctdl:assessedBy": {
          "description": "The agent being referenced provides the assessment to earn the entity being described. [Organization | Person]"
        },

        "ctdl:conferredBy": {
          "description": "The entity being described is conferred by the entity being referenced. [Organization | Person | QualityAssuranceAction]"
        },

        "ctdl:credentialLevel": {
          "description": "The level of credential. [CredentialLevelType]",
          "type": "array",
          "items": { "type": "string" }
        },

        "ctdl:credentialType": {
          "description": "The type of credential. [CredentialType]",
          "type": "array",
          "items": { "type": "string" }
        },

        "ctdl:credentialId": {
          "description": "A globally unique identifier by which the creator/owner/provider of a credential recognizes the credential in transactions with the external environment (e.g., in verifiable claims involving the credential). The identifier may take the form of a URN, UUID, ARK, DOI, INFO or any other publicly recognized, globally unique identifier scheme",
          "type": "string"
        },

        "ctdl:ctid": {
          "description": "A globally unique Credential Transparency Identifier (CTID) issued by the Credential Registry Service (CRS) by which the creator/owner/provider of a credential recognizes the credential in transactions with the external environment (e.g., in verifiable claims involving the credential).",
          "type": "string",
          "pattern": "^urn:ctid:.*"
        },

        "ctdl:dateEffective": {
          "description": "The effective date of the information.",
          "type": "string",
          "format": "date"
        },

        "ctdl:developmentProcess": {
          "description": "A profile of the process by which the entity being described, or aspects of it, were created. [ProcessProfile]"
        },

        "ctdl:earnings": {
          "description": "The entity being referenced is a profile of credential holder earnings data. [EarningsProfile]",
          "type": "array"
        },

        "ctdl:employmentOutcome": {
          "description": "A profile of jobs obtained with this credential by occupaion and industry for a given period and area. [EmploymentOutcomeProfile]",
          "type": "array"
        },

        "ctdl:endorsedBy": {
          "description": "The entity being described has the public support of the entity being referenced. [Organization | Profile | QualityAssuranceAction]"
        },

        "ctdl:estimatedTimeToEarn": {
          "description": "Estimated time it will take a person to earn this credential. [DurationProfile]",
          "type": "array"
        },

        "ctdl:holders": {
          "description": "A profile of the number and characteristics of credentialed individuals and their geographic locations. [HoldersProfile]",
          "type": "array"
        },

        "ctdl:industryCategory": {
          "description": "The class identifier for the industry context. For example, NAICS (North American Classification System)",
          "type": "array",
          "items": { "$ref": "#/definitions/utils/enumeration" }
        },

        "ctdl:isRecommendedFor": {
          "description": "Defines a set of items that earning the credential will help prepare a person for. [ConditionProfile]",
          "type": "array",
          "items": { "$ref": "#definitions/ctdl_condition_profile" }
        },

        "ctdl:isRequiredFor": {
          "description": "Defines a set of items that the credential is a known requirement for. Does not necessarily define a valid or complete set of the requirements for the target credential. [ConditionProfile]",
          "type": "array",
          "items": { "$ref": "#definitions/ctdl_condition_profile" }

        },

        "ctdl:jurisdiction": {
          "description": "The region to which the information in this profile is applicable. [JurisdictionProfile]",
          "type": "array"
        },

        "ctdl:latestVersion": {
          "description": "The lastest version of the credential being described. [Credential]"
        },

        "ctdl:maintenanceProfile": {
          "description": "Profile of the process by which the entity being described is maintained including review and updating. [ProcessProfile]"
        },

        "ctdl:monitoredBy": {
          "description": "The agent being referenced monitors the entity being referenced. [Organization | Person]"
        },

        "ctdl:occupationCategory": {
          "description": "The relevant occupation. [OccupationType]",
          "type": "array",
          "items": { "$ref": "#/definitions/utils/enumeration" }
        },

        "ctdl:offeredBy": {
          "description": "Access to the credential being described is offerred by the agent being referenced. [Organization | Person]"
        },

        "ctdl:purpose": {
          "description": "The intended type of application of the credential by the holder.",
          "type": ["string", "array"]
        },

        "ctdl:recognizedBy": {
          "description": "The agent being referenced acknowledges the validity of the credential being described. [Organization | Person | QualityAssuranceAction]"
        },

        "ctdl:recommends": {
          "description": "Defines a set of items that will assist someone in earning the credential. [ConditionProfile]",
          "type": "array",
          "items": { "$ref": "#definitions/ctdl_condition_profile" }
        },

        "ctdl:regulatedBy": {
          "description": "The agent being referenced enforces the legal requirements of the entity being referenced. [Organization | Person]"
        },

        "ctdl:relatedAction": {
          "description": "An action related to the entity. [QualityAssuranceAction]"
        },

        "ctdl:removal": {
          "description": "A profile that described whether the credential can be revoked, and if so, what due process is in place. [ConditionProfile]",
          "type": "array",
          "items": { "$ref": "#definitions/ctdl_condition_profile" }
        },

        "ctdl:renewal": {
          "description": "A profile of what is needed to maintain a credential once obtained. [ConditionProfile]",
          "type": "array",
          "items": { "$ref": "#definitions/ctdl_condition_profile" }
        },

        "ctdl:renewalBy": {
          "description": "The agent being referenced handles the renewal of the credential being described. [Organization | Person]"
        },

        "ctdl:replacesVersion": {
          "description": "The version being described replaces the version being referenced. [Credential]"
        },

        "ctdl:requires": {
          "description": "Defines a set of requirements that completely qualify a person to attain the credential. [ConditionProfile]",
          "type": "array",
          "items": { "$ref": "#definitions/ctdl_condition_profile" }
        },

        "ctdl:revocation": {
          "description": "A profile that described whether the credential can be revoked, and if so, what due process is in place. [RevocationProfile]"
        },

        "ctdl:revocationBy": {
          "description": "The agent being referenced handles the revocation of the credential from the credential holder due to violations. [Organization | Person | QualityAssuranceAction]"
        },

        "ctdl:selectionProfile": {
          "description": "A profile of the process by which aspects of the entity being described were selected from existing options (as opposed to developed anew). [ProcessProfile]"
        },

        "ctdl:updatedVersionBy": {
          "description": "The agent being referenced updates the version of the credential being described. [Organization | Person]"
        },

        "ctdl:validatedBy": {
          "description": "The agent being referenced validates the credential being described. [Organization | Person | QualityAssuranceAction]"
        },

        "ctdl:validationProcess": {
          "description": "A profile of the process by which the entity being described is validated. [ProcessProfile]"
        },

        "ctdl:verifiedBy": {
          "description": "The agent being referenced offers a service that verifies the owners of the credential being described. [Organization | Person]"
        },

        "ctdl:versionIdentifier": {
          "description": "An alphanumeric identifier of a version of the entity being described that is unique within the organizational context.",
          "type": "string"
        }
      },

      "required": [ "@type" ]
    },

    "dc": {
      "properties": {
        "dc:hasPart": {
          "description": "A related resource that is included either physically or logically in the described resource. [Credential]"
        },
        "dc:isPartOf": {
          "description": "A related resource in which the described resource is physically or logically included. [Credential]"
        }
      }
    },

    "utils": {
      "enumeration": {
        "properties": {
          "@type": { "enum": ["schema:Enumeration"] },
          "schema:name": { "type": "string" },
          "schema:url": { "type": "string" },
          "unknown:items": {
            "type": "array",
            "items": {
              "properties": {
                "@type": { "enum": ["unknown:EnumerationItem"] },
                "schema:name": { "type": "string" },
                "schema:url": { "type": "string" }
              }
            }
          }
        }
      }
    },

    "ctdl_condition_profile": {
      "type": "object",
      "properties": {
        "@type": { "enum": ["ctdl:ConditionProfile"] },

        "ctdl:assertedBy": {
          "description": "The agent providing the information contained in the entity being described. [Organization | Person]"
        },

        "ctdl:applicableAudienceType": {
          "description": "The audience for which the described cost is available. [AudienceType]",
          "type": "array",
          "items": { "type": "string" }
        },

        "ctdl:credentialType": {
          "description": "The type of credential. [CredentialType]",
          "type": "array",
          "items": { "type": "string" }
        },

        "ctdl:dateEffective": {
          "description": "The effective date of the information.",
          "type": "string",
          "format": "date"
        },

        "ctdl:experience": {
          "description": "The amount and nature of work, experiential learning, or other relevant experience a person must have.",
          "type": "string"
        },

        "ctdl:jurisdiction": {
          "description": "The region to which the information in this profile is applicable. [JurisdictionProfile]",
          "type": "array"
        },

        "ctdl:minimumAge": {
          "description": "The minimum allowed age (in years) at which a person is eligible for the credential.",
          "type": "number"
        },

        "ctdl:profileOf": {
          "description": "The entity being described is a profile of the credential being referenced. [Credential]"
        },

        "ctdl:residentOf": {
          "description": "The place of which a person must be a legal resident or citizen in order to be eligible for the credential. [JurisdictionProfile]",
          "type": "array"
        },

        "ctdl:targetAssessment": {
          "description": "A profile of the assessment being referenced. [AssessmentProfile]",
          "type": "array",
          "items": { "$ref": "#definitions/ctdl_assessment_profile" }
        },

        "ctdl:targetCompetency": {
          "description": "An alignment to an competency assertion in an established framework. [AlignmentObject]",
          "type": "array"
        },

        "ctdl:targetCredential": {
          "description": "A credential required to attain this credential. [Credential]",
          "type": "array"
        },

        "ctdl:targetLearningOpportunity": {
          "description": "A profile of an educational or training program. [LearningOpportunityProfile]",
          "type": "array"
        },

        "ctdl:targetTask": {
          "description": "A task to be completed. [TaskProfile]",
          "type": "array"
        }

      }
    },

    "ctdl_assessment_profile": {
      "type": "object",
      "properties": {
        "@type": { "enum": ["ctdl:AssessmentProfile"] },
        "schema:name": { "type": "string" },
        "schema:description": { "type": "string" }
      }
    },

    "schemaorg_creative_work": <%= partial 'schemaorg/_creative_work', :schema %>
  },

  "allOf": [
    { "$ref": "<%= ref :json_ld %>" },
    { "$ref": "#/definitions/schemaorg_creative_work"},
    { "$ref": "#/definitions/ctdl" },
    { "$ref": "#/definitions/dc"}
  ]
}
